"use strict";angular.module("xenon.factory",[]).factory("$layoutToggles",function(e,t){return{initToggles:function(){e.sidebarToggle=function(){t.setOptions("sidebar.isCollapsed",!e.layoutOptions.sidebar.isCollapsed)},e.settingsPaneToggle=function(){var n=e.layoutOptions.settingsPane.useAnimation&&!isxs(),o={top:jQuery(document).scrollTop(),toTop:0};public_vars.$body.hasClass("settings-pane-open")&&(o.toTop=o.top),TweenMax.to(o,n?.1:0,{top:o.toTop,roundProps:["top"],ease:o.toTop<10?null:Sine.easeOut,onUpdate:function(){jQuery(window).scrollTop(o.top)},onComplete:function(){if(n)if(public_vars.$settingsPaneIn.addClass("with-animation"),public_vars.$settingsPane.is(":visible"))public_vars.$settingsPaneIn.addClass("closing"),TweenMax.to(public_vars.$settingsPane,.25,{css:{height:0},delay:.15,ease:Power1.easeInOut,onComplete:function(){public_vars.$body.removeClass("settings-pane-open"),public_vars.$settingsPane.css({height:""}),public_vars.$settingsPaneIn.removeClass("closing visible")}});else{public_vars.$body.addClass("settings-pane-open");var o=public_vars.$settingsPane.outerHeight(!0);public_vars.$settingsPane.css({height:0}),TweenMax.to(public_vars.$settingsPane,.25,{css:{height:o},ease:Circ.easeInOut,onComplete:function(){public_vars.$settingsPane.css({height:""})}}),public_vars.$settingsPaneIn.addClass("visible")}else public_vars.$body.toggleClass("settings-pane-open"),public_vars.$settingsPaneIn.removeClass("visible"),public_vars.$settingsPaneIn.removeClass("with-animation"),t.setOptions("settingsPane.isOpen",!e.layoutOptions.settingsPane.isOpen)}})},e.chatToggle=function(){t.setOptions("chat.isOpen",!e.layoutOptions.chat.isOpen)},e.mobileMenuToggle=function(){t.setOptions("sidebar.isMenuOpenMobile",!e.layoutOptions.sidebar.isMenuOpenMobile),t.setOptions("horizontalMenu.isMenuOpenMobile",!e.layoutOptions.horizontalMenu.isMenuOpenMobile)},e.mobileUserInfoToggle=function(){t.setOptions("userInfoNavVisible",!e.layoutOptions.userInfoNavVisible)}}}}).factory("$pageLoadingBar",function(e,t){return{init:function(){var n=this;t.showLoadingBar=this.showLoadingBar,t.hideLoadingBar=this.hideLoadingBar,e.$on("$stateChangeStart",function(){n.showLoadingBar({pct:95,delay:1.1,resetOnEnd:!1}),jQuery("body .page-container .main-content").addClass("is-loading")}),e.$on("$stateChangeSuccess",function(){n.showLoadingBar({pct:100,delay:.65,resetOnEnd:!0}),jQuery("body .page-container .main-content").removeClass("is-loading")})},showLoadingBar:function(e){var t={pct:0,delay:1.3,wait:0,before:function(){},finish:function(){},resetOnEnd:!0},n=this;"object"==typeof e?t=jQuery.extend(t,e):"number"==typeof e&&(t.pct=e),t.pct>100?t.pct=100:t.pct<0&&(t.pct=0);var $=jQuery,o=$(".xenon-loading-bar");0==o.length&&(o=$('<div class="xenon-loading-bar progress-is-hidden"><span data-pct="0"></span></div>'),public_vars.$body.append(o));var a=o.find("span"),i=a.data("pct"),s=i>t.pct;t.before(i),TweenMax.to(a,t.delay,{css:{width:t.pct+"%"},delay:t.wait,ease:s?Expo.easeOut:Expo.easeIn,onStart:function(){o.removeClass("progress-is-hidden")},onComplete:function(){var e=a.data("pct");100==e&&t.resetOnEnd&&hideLoadingBar(),t.finish(e)},onUpdate:function(){a.data("pct",parseInt(a.get(0).style.width,10))}})},hideLoadingBar:function(){var $=jQuery,e=$(".xenon-loading-bar"),t=e.find("span");e.addClass("progress-is-hidden"),t.width(0).data("pct",0)}}}).factory("$layout",function($rootScope,$cookies,$cookieStore){return{propsToCache:["horizontalMenu.isVisible","horizontalMenu.isFixed","horizontalMenu.minimal","horizontalMenu.clickToExpand","sidebar.isVisible","sidebar.isCollapsed","sidebar.toggleOthers","sidebar.isFixed","sidebar.isRight","sidebar.userProfile","chat.isOpen","container.isBoxed","skins.sidebarMenu","skins.horizontalMenu","skins.userInfoNavbar"],setOptions:function(e,t){"string"==typeof e&&"undefined"!=typeof t&&(e=this.pathToObject(e,t)),jQuery.extend(!0,$rootScope.layoutOptions,e),this.saveCookies()},saveCookies:function(){var e=this.iterateObject($rootScope.layoutOptions,"",{});angular.forEach(e,function(e,t){$cookies[t]=e})},resetCookies:function(){var e=this.iterateObject($rootScope.layoutOptions,"",{});angular.forEach(e,function(e,t){$cookieStore.remove(t)})},loadOptionsFromCookies:function(){var e=this,t=e.iterateObject($rootScope.layoutOptions,"",{}),n={};angular.forEach(t,function(t,o){var a=$cookies[o];"undefined"!=typeof a&&jQuery.extend(!0,n,e.pathToObject(o,a))}),jQuery.extend($rootScope.layoutOptions,n)},is:function(e,t){var n=this.get(e);return n==t},get:function(prop){var cookieval=$cookies[prop];return cookieval&&cookieval.match(/^true|false|[0-9.]+$/)&&(cookieval=eval(cookieval)),cookieval||(cookieval=this.getFromPath(prop,$rootScope.layoutOptions)),cookieval},getFromPath:function(e,t){var n="",o,a=e.split(".");return angular.forEach(a,function(e,i){var s=a.length-1==i;o=o?o[e]:t[e],s&&(n=o)}),n},pathToObject:function(obj_path,the_value){var new_obj={},curr_obj=null,last_key;if(obj_path){var paths=obj_path.split("."),depth=paths.length-1,array_scls="";angular.forEach(paths,function(path_id,i){var is_last=paths.length-1==i;array_scls+="['"+path_id+"']",is_last?("string"!=typeof the_value||the_value.toString().match(/^true|false|[0-9.]+$/)||(the_value='"'+the_value+'"'),eval("new_obj"+array_scls+" = "+the_value+";")):eval("new_obj"+array_scls+" = {};")})}return new_obj},iterateObject:function(e,t,n){function o(e,t){for(var n=t.length,o=0;n>o;o++)if(t[o]==e)return!0;return!1}var a=this;return angular.forEach(e,function(e,o){return"object"==typeof e?a.iterateObject(e,t+o+".",n):void("undefined"!=typeof e&&(n[t+o]=e))}),angular.forEach(n,function(e,t){o(t,a.propsToCache)||delete n[t]}),n}}});